---
import Hero from "@/components/Hero.astro";
import Layout from "@/layouts/Layout.astro";
import PartnersImage from "@/assets/hero/partners.jpg";
import { getAllPartners } from "@/lib/sanity-queries";
import { urlFor } from "@/lib/sanity";
import { Image } from "astro:assets";

const partners = await getAllPartners();
---

<Layout title="Our Partners">
  <div class="relative">
    <Hero picture={PartnersImage} pictureAlt="Our Partners">
      <div class="relative z-20 text-center text-white px-4 max-w-4xl mx-auto">
        <h1 class="text-5xl md:text-7xl font-bold mb-6">Our Partners</h1>
        <h2 class="text-3xl md:text-5xl font-bold mb-8 text-primary">
          They support us
        </h2>
        <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto leading-relaxed">
          Discover the companies that support us in our projects.
        </p>
      </div>
    </Hero>
    <section class="relative lg:px-10 bg-white py-10">
      <h2 class="text-3xl md:text-5xl font-bold text-center mb-6">
        Thank you to them!
      </h2>
      <hr class="w-28 h-1 bg-primary mx-auto rounded-full" />
      {
        partners.length > 0 ? (
          <div class="max-w-6xl mx-auto px-5 sm:px-10 lg:px-0 mt-16">
            <div class="flex justify-center">
              <div class="mb-16 w-full flex flex-col gap-8">
                {partners.map((partner) => (
                  <div class="border-2 w-full border-primary/20 rounded-2xl p-4 gap-8 flex md:flex-row flex-col items-center justify-left">
                    <Image
                      src={urlFor(partner.image).width(200).fit("max").url()}
                      alt={partner.name}
                      width={100}
                      height={100}
                      class="object-contain shadow-xl"
                    />

                    <div class="flex flex-col items-start gap-3 w-full">
                      <h4 class="text-3xl font-bold text-center text-primary">
                        {partner.name}
                      </h4>
                      <p class="text-left text-gray-500">
                        {partner.description.en}
                      </p>
                      <a
                        href={partner.link}
                        rel="noopener noreferrer"
                        target="_blank"
                        class="text-primary font-bold hover:text-secondary/80 transition-colors duration-300 hover:underline"
                      >
                        See their site
                      </a>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        ) : (
          <div class="max-w-6xl mx-auto px-5 sm:px-10 lg:px-0 mt-16">
            <p class="text-center text-lg font-bold">
              We don't have any partners yet.
            </p>
          </div>
        )
      }
    </section>
  </div>
</Layout>
