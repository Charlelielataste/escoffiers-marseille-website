---
import MailIcon from "@/components/icons/MailIcon.astro";
import MapIcon from "@/components/icons/MapIcon.astro";
import { getTranslations, type Locale } from "@/lib/i18n";
import { Image } from "astro:assets";

export interface Props {
  photo: string;
  color: string;
  name: string;
  role: string;
  description: string;
  email?: string;
  workplace?: string;
  size?: string;
  locale: Locale;
}

const {
  photo,
  color,
  name,
  role,
  description,
  email,
  workplace,
  size = "112px",
  locale,
} = Astro.props;

const t = getTranslations(locale);
---

<div class="flex flex-col items-center text-center w-full sm:w-80">
  <!-- Photo de profil ronde -->
  <div class="relative mb-4 shadow-xl rounded-full">
    <div
      class="rounded-full overflow-hidden border-4"
      style={`width: ${size}; height: ${size}; border-color: ${color};`}
    >
      <Image
        src={photo}
        alt={name}
        class="object-cover w-full h-full"
        width={100}
        height={100}
        loading="lazy"
      />
    </div>
  </div>

  <!-- Informations du membre -->
  <h4 class="text-lg font-bold text-gray-900 mb-1">
    {name}
  </h4>
  <p class="text-sm font-medium mb-2" style={`color: ${color};`}>
    {role}
  </p>
  <p class="text-sm text-gray-600 mb-2 line-clamp-2 font-semibold">
    {description}
  </p>
  {
    workplace && (
      <a
        href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(workplace)}`}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-x-2"
      >
        <MapIcon size="16" class="text-red-500" />
        <span class="text-sm hover:text-secondary/80 underline">
          {workplace}
        </span>
      </a>
    )
  }
  {
    email && (
      <a href={`mailto:${email}`} class="mt-2 flex items-center gap-x-2">
        <MailIcon size="16" class="text-primary shrink-0" />
        <span class="hover:text-secondary/80 hover:underline mt-0.5 text-sm">
          {t.members.contact}
        </span>
      </a>
    )
  }
</div>
