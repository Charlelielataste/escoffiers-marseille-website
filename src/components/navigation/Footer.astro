---
import Facebook from "@/components/icons/Facebook.astro";
import Instagram from "@/components/icons/Instagram.astro";
import { getNavUrls, getTranslations, type Locale } from "@/lib/i18n";
import { Image } from "astro:assets";
const currentYear = new Date().getFullYear();

const currentLocale = (Astro.currentLocale || "fr") as Locale;
const navUrls = getNavUrls(currentLocale);

const t = getTranslations(currentLocale);
---

<footer class="relative bg-primary border-t border-tertiary">
  <div class="max-w-6xl mx-auto p-6">
    <div class="flex flex-col md:flex-row justify-between gap-10">
      <!-- Logo and description -->
      <div class="w-full">
        <div class="flex items-center mb-4">
          <a
            href={navUrls.home}
            class="hover:scale-110 shrink-0 w-10 h-10 flex items-center justify-center transition-colors bg-white rounded-full mr-2 border border-black/60"
          >
            <Image
              src="/logos/logo-escoffier-nav.png"
              alt="Logo Escoffiers"
              width="40"
              height="40"
              class="p-1"
              loading="lazy"
            />
          </a>
          <h3 class="text-xl font-bold text-white text-bordered-light">
            Disciples d'Escoffier Provence Méditerranée
          </h3>
        </div>
        <p class="text-white mb-6 max-w-md text-bordered-light font-medium">
          {t.footer.description}
        </p>
        <div class="flex items-center space-x-4">
          <a
            href="https://www.facebook.com/disciples.escoffier.provence.mediterranee/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-white hover:text-tertiary/90 transition-colors hover:scale-110"
          >
            <Facebook class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" />
          </a>
          <a
            href="https://www.instagram.com/disciples_escoffier_prov_med/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-white hover:text-tertiary transition-colors hover:scale-110"
          >
            <Instagram
              class="h-6 w-6"
              fill="currentColor"
              viewBox="0 0 24 24"
            />
          </a>
        </div>
      </div>

      <!-- Navigation -->
      <div
        class="flex flex-col md:flex-row gap-10 justify-between w-full px-0 md:px-12 lg:px-28"
      >
        <div class="whitespace-nowrap">
          <h4 class="text-lg font-bold text-white mb-4 text-bordered-light">
            {t.footer.navigation}
          </h4>
          <ul class="space-y-2">
            <li>
              <a
                href={navUrls.home}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.home}
              </a>
            </li>
            <li>
              <a
                href={navUrls.about}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.about}
              </a>
            </li>
            <li>
              <a
                href={navUrls.members}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.members}
              </a>
            </li>
            <li>
              <a
                href={navUrls.partners}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.partners}
              </a>
            </li>
          </ul>
        </div>

        <!-- Contact -->
        <div>
          <h4 class="text-lg font-bold text-white mb-4 text-bordered-light">
            {t.footer.usefulLinks}
          </h4>
          <ul class="space-y-2">
            <li>
              <a
                href={navUrls.articles}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.articles}
              </a>
            </li>
            <li>
              <a
                href={navUrls.events}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.events}
              </a>
            </li>
            <li>
              <a
                href={navUrls.contact}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.contact}
              </a>
            </li>
            <li>
              <a
                href={currentLocale === "fr"
                  ? "/nous-rejoindre#contact"
                  : "/en/join-us#contact"}
                class="text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              >
                {t.nav.contactUs}
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Ligne de séparation -->
    <div class="pt-6 mt-6 border-t border-white/20">
      <div class="flex flex-col lg:flex-row justify-between lg:items-center">
        <p class="text-white font-medium text-bordered-light">
          © {currentYear} Les Disciples d'Escoffier. {
            t.footer.allRightsReserved
          }
        </p>
        <div
          class="flex items-center justify-between lg:justify-end space-x-6 mt-6 lg:mt-0"
        >
          <!-- Bouton pour désactiver le curseur personnalisé -->
          <div class="hidden sm:block">
            <button
              id="cursor-toggle"
              class="flex text-white font-medium hover:text-tertiary transition-colors text-bordered-light"
              aria-label="Activer/Désactiver le curseur personnalisé"
            >
              <span id="cursor-toggle-text" class="text-center"
                >{t.footer.disableCursor}</span
              >
            </button>
          </div>
          <a
            href="/mentions-legales"
            class="text-white text-center font-medium hover:text-tertiary transition-colors text-bordered-light"
          >
            {t.footer.legalMentions}
          </a>
          <a
            href="/politique-confidentialite"
            class="text-white text-center font-medium hover:text-tertiary transition-colors text-bordered-light"
          >
            {t.footer.privacyPolicy}
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
<script>
  document.addEventListener("astro:page-load", function () {
    const cursorToggle = document.getElementById("cursor-toggle");
    const cursorToggleText = document.getElementById("cursor-toggle-text");

    const locale = window.location.pathname.startsWith("/en") ? "en" : "fr";

    // Vérifier l'état actuel du curseur personnalisé
    const customCursorDisabled =
      localStorage.getItem("customCursorDisabled") === "true";

    // Appliquer l'état initial
    updateCursorState(customCursorDisabled);

    // Gestionnaire d'événement pour le bouton
    cursorToggle?.addEventListener("click", function () {
      const isCurrentlyDisabled = document.body.classList.contains(
        "custom-cursor-disabled"
      );
      const newState = !isCurrentlyDisabled;

      // Sauvegarder la préférence
      localStorage.setItem("customCursorDisabled", newState.toString());

      // Appliquer le nouvel état
      updateCursorState(newState);
    });

    function updateCursorState(disabled: boolean) {
      if (disabled) {
        document.body.classList.add("custom-cursor-disabled");
        if (cursorToggleText) {
          cursorToggleText.textContent =
            locale === "fr"
              ? "Activer curseur personnalisé"
              : "Enable custom cursor";
        }
      } else {
        document.body.classList.remove("custom-cursor-disabled");
        if (cursorToggleText) {
          cursorToggleText.textContent =
            locale === "fr"
              ? "Désactiver curseur personnalisé"
              : "Disable custom cursor";
        }
      }
    }
  });
</script>
